{% extends 'clipapp/login_nav.html' %}
{% block title %}Dashboard{% endblock %}
{% block content %}

    <main class="dashboard-container">
        <div class="search-bar">
            <span class="search-icon">üîç</span>
            <input type="text" placeholder="Search snippets...">
        </div>

        <div class="snippet-grid">
            <!-- Sample Snippet Card -->
            <div class="snippet-card">
                <div class="snippet-header">
                    <h3>Example Snippet</h3>
                    <button class="btn-secondary">‚≠ê</button>
                </div>
                <div class="snippet-content">
                    console.log("Hello World!");
                </div>
                <div class="snippet-tags">
                    <span class="tag">JavaScript</span>
                    <span class="tag">Basics</span>
                </div>
                <div class="snippet-actions">
                    <button class="btn btn-secondary">Copy</button>
                    <button class="btn btn-primary">Edit</button>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-container">
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">Contact</a>
                <a href="#">Privacy Policy</a>
            </div>
            <div class="copyright">
                ¬© 2024 ClipBuddy
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinks = document.querySelector('.nav-links');

        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
        }

        // Copy snippet functionality
        function copySnippet(content) {
            navigator.clipboard.writeText(content)
                .then(() => alert('Copied to clipboard!'))
                .catch(err => console.error('Failed to copy:', err));
        }

        // Sample data structure for snippets
        const snippets = [
            {
                id: 1,
                title: 'Example Snippet',
                content: 'console.log("Hello World!");',
                tags: ['JavaScript', 'Basics'],
                favorite: false
            }
        ];

        // Function to render snippets
        function renderSnippets(snippetsArray) {
            const grid = document.querySelector('.snippet-grid');
            grid.innerHTML = snippetsArray.map(snippet => `
                <div class="snippet-card">
                    <div class="snippet-header">
                        <h3>${snippet.title}</h3>
                        <button class="btn-secondary" onclick="toggleFavorite(${snippet.id})">
                            ${snippet.favorite ? '‚≠ê' : '‚òÜ'}
                        </button>
                    </div>
                    <div class="snippet-content">
                        ${snippet.content}
                    </div>
                    <div class="snippet-tags">
                        ${snippet.tags.map(tag => `
                            <span class="tag">${tag}</span>
                        `).join('')}
                    </div>
                    <div class="snippet-actions">
                        <button class="btn btn-secondary" onclick="copySnippet('${snippet.content}')">
                            Copy
                        </button>
                        <button class="btn btn-primary" onclick="editSnippet(${snippet.id})">
                            Edit
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Initial render
        renderSnippets(snippets);

        // Search functionality
        const searchInput = document.querySelector('.search-bar input');
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredSnippets = snippets.filter(snippet =>
                snippet.title.toLowerCase().includes(searchTerm) ||
                snippet.content.toLowerCase().includes(searchTerm) ||
                snippet.tags.some(tag => tag.toLowerCase().includes(searchTerm))
            );
            renderSnippets(filteredSnippets);
        });
    </script>
{% endblock %}